<!--
 * @Descripttion: 
 * @version: 0.x
 * @Author: zhai
 * @Date: 2026-01-12 09:16:50
 * @LastEditors: zhai
 * @LastEditTime: 2026-01-12 14:49:32
-->
<!-- Copyright (C) Microsoft Corporation. All rights reserved. -->
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Tiny Code</title>

    <!-- Mobile tweaks -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-title" content="Tiny Code">
    <link rel="apple-touch-icon" href="/code-192.png" />

    <!-- Disable pinch zooming -->
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">

    <!-- Workbench Icon/Manifest/CSS -->
    <link rel="icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="manifest" href="/manifest.json">
    <link data-name="vs/workbench/workbench.web.main" rel="stylesheet"
        href="./vscode/out/vs/workbench/workbench.web.main.css">

    <style>
        /* 彻底隐藏活动栏（包括图标和整个栏） */
        /* .monaco-workbench .activitybar { display: none !important; }
        .monaco-workbench .part.activitybar { display: none !important; } */

        /* 1. 物理隐藏左侧活动栏图标 (Menu, SCM, Debug, Extensions, Accounts, Manage) */
        .action-item:has(a[aria-label^="Menu"]),
        .action-item:has(a[aria-label^="菜单"]),
        .activitybar .content .home-bar,
        .composite-bar .home-bar {
            display: none !important;
        }

        .action-item:has(a[aria-label^="Source Control"]),
        .action-item:has(a[aria-label^="源代码管理"]),
        .action-item:has(a[aria-label^="Run and Debug"]),
        .action-item:has(a[aria-label^="运行和调试"]),
        .action-item:has(a[aria-label^="Extensions"]),
        .action-item:has(a[aria-label^="扩展"]),
        .action-item:has(a[aria-label^="Accounts"]),
        .action-item:has(a[aria-label^="账户"]),
        .action-item:has(a[aria-label^="Manage"]),
        .action-item:has(a[aria-label^="管理"]) {
            display: none !important;
        }

        /* 隐藏状态栏 */
        .monaco-workbench .statusbar {
            display: none !important;
        }

        /* 隐藏不必要的侧边栏视图标题和内容（Outline、Timeline 等） */
        .pane-header:has([title="Outline"]),
        .pane-header:has([title="Timeline"]),
        .pane-header:has([title="大纲"]),
        .pane-header:has([title="时间线"]) {
            display: none !important;
        }

        .view-instance .outline-tree,
        .view-instance .timeline-tree {
            display: none !important;
        }

        /* 右键菜单初步隐藏 */
        .monaco-menu .action-item:hidden {
            display: none !important;
        }
    </style>

</head>

<body aria-label="Tiny Code Editor">
</body>

<!-- Startup (do not modify order of script tags!) -->
<script src="./vscode/out/vs/loader.js"></script>
<script src="./vscode/out/vs/webPackagePaths.js"></script>
<script>
    Object.keys(self.webPackagePaths).map(function (key, index) {
        self.webPackagePaths[key] = `${window.location.origin}/vscode/node_modules/${key}/${self.webPackagePaths[key]}`;
    });
    require.config({
        baseUrl: `${window.location.origin}/vscode/out`,
        recordStats: true,
        trustedTypesPolicy: window.trustedTypes?.createPolicy('amdLoader', {
            createScriptURL(value) {
                return value;
            }
        }),
        paths: self.webPackagePaths
    });
</script>
<script src="./vscode/out/vs/workbench/workbench.web.main.nls.js"></script>
<script src="./vscode/out/vs/workbench/workbench.web.main.js"></script>
<script src="./vscode/out/vs/code/browser/workbench/workbench.js"></script>

<script>


    // 增强型右键菜单清理（更可靠、更干净）
    const MENU_BLACKLIST = [
        /Outline/i, /大纲/i, /Timeline/i, /时间线/i,
        /Menu/i, /菜单/i, /Source Control/i, /源代码管理/i,
        /Run and Debug/i, /运行和调试/i, /Extensions/i, /扩展/i,
        /Accounts/i, /账户/i, /Move Primary Side Bar/i,
        /Hide Activity Bar/i, /Show Activity Bar/i
    ];

    const cleanupMenu = () => {
        const menu = document.querySelector('.monaco-menu-container, .context-view');
        if (!menu) return;

        const items = Array.from(menu.querySelectorAll('.action-item'));
        let hasVisible = false;

        items.forEach(item => {
            const label = item.querySelector('.action-label');
            const text = (label?.textContent || '') + (label?.getAttribute('aria-label') || '');

            const shouldHide = MENU_BLACKLIST.some(regex => regex.test(text));
            if (shouldHide) {
                item.style.display = 'none';
                item.hidden = true;
                return;
            }

            // 处理分隔线：连续或首尾分隔线隐藏
            if (item.classList.contains('separator') || (text.trim() === '' && item.classList.contains('disabled'))) {
                item.classList.add('menu-separator');
            }

            if (window.getComputedStyle(item).display !== 'none') {
                hasVisible = true;
            }
        });

        // 清理连续/首尾分隔线
        const visibleItems = items.filter(i => window.getComputedStyle(i).display !== 'none' && !i.hidden);
        if (visibleItems.length > 0) {
            if (visibleItems[0].classList.contains('menu-separator')) visibleItems[0].style.display = 'none';
            if (visibleItems[visibleItems.length - 1].classList.contains('menu-separator')) visibleItems[visibleItems.length - 1].style.display = 'none';

            let prevSep = false;
            visibleItems.forEach(item => {
                const isSep = item.classList.contains('menu-separator');
                if (isSep && prevSep) item.style.display = 'none';
                prevSep = isSep;
            });
        }
    };

    const observer = new MutationObserver(() => {
        requestAnimationFrame(cleanupMenu);
    });
    observer.observe(document.body, { childList: true, subtree: true, attributes: true });
</script>

</html>